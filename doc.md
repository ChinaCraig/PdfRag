你是一个python架构师，现在要做一个pdf智能文件管理系统，这个系统可以实现pdf文件中文字、表格、图片、图表等内容的提取，然后通过LLM去实现内容的检索。

总体目标：交互方式同ChatGpt一样聊天问答的方式，利用LLM和pdf的内容构建用户想要的答案，实现一个pdf专用的GraphRAG系统。这是一个demo，只要能实现GraphRAG就可以，不需要按照生产的标准设计它。

以下是项目描述：
1.项目结构：
|-- app
	|--routes #路由
		|--FileRoutes.py #文件管理路由
		|--SearchRoutes.py #智能检索路由
	|--service #服务
		|--FileService.py #文件管理service
		|--SearchService.py #智能检索service
		|--GraphRAGService.py #文件内容识别、关系识别等
|--config
	|--db.yaml #mysql数据库的配置信息
	|--model.yaml #项目用所有用到的模型配置
	|--config.yaml #项目的配置，可配置文件保存目录
	|--prompt.yaml #提示词配置
|--templates #保存所有前端内容
	|--css #保存所有.css文件
	|--js #保存所有.js文件
	|--html #保存所有.html文件

2.项目中关键文件的内容描述
1）FileRoutes.py这个文件用来处理和文件管理相关的路由信息，这里只做入参和返参的处理，具体的实现需要调用FileService.py提供的接口
2）FileService.py这个文件用来处理和文件管理相关的所有接口的实现，会被FileRoutes.py调用
3）SearchRoutes.py这个文件用来处理和智能检索相关的路由信息，这里只做入参和返参的处理，具体的实现需要调用SearchService.py提供的接口
4）SearchService.py这个文件用来处理和智能检索相关的所有接口的实现，会被SearchRoutes.py调用
5）model.yaml这个配置文件主要用来配置模型相关的功能，项目全局用到的模型都需要在这里配置，需要写清楚注释
6）prompt.yaml这个配置文件主要用来配置提示词，项目全局用到的提示词均需要在这里配置，需要写清楚注释
7）GraphRAGService.py这个文件主要用来处理文件的内容识别、向量化、关系识别等内容
3.项目模块描述
1）文件管理
这个模块主要用来处理pdf文件的管理功能，为智能检索提供数据源，智能检索的所有结果均从这里提供，支持文件的上传，删除，修改名称，上传完成后前端显示上传成功，然后后台开启该文件的内容识别，在文件列表可增加对该文件是否识别的标识，若在识别中提供识别进度展示.
以下是文件管理的详细说明：
a.该模块的主要目的是为GraphRAG提供数据保障，在这个环节需要将GraphRAG用到的所有数据都提取并保存到向量数据库、图数据库等
b.文件上传成功后，自动开始对本次上传文件的内容识别，必须从pdf文件中识别文字、表格、图片、图表等内容，并按照GraphRAG的实现逻辑保存对应的数据库
c.该模块用到的所有依赖或模型，例如OCR相关、嵌入模型等等内容不要使用降级处理机制，严格按照要求实现需求，不要扩散和GraphRAG不相关的内容
2）智能检索
这个模块是该项目的核心功能，对识别的结果提供智能检索，交互的方式同现在主流的AI交互方式相同，例如ChatGpt、deepseek可在web端采用流的方式显示分析推理过程，并将检索到的结果利用LLM重新编排，最终结果需要支持文字、表格、图片、图表，总体要实现一个连续、流畅的GraphRAG。

4.前端页面描述
1）顶部是系统名称和log
2）左侧是菜单栏，菜单项：文件管理，智能检索
3）点击文件管理菜单，右侧展示文件管理内容，点击智能检索，展示一个聊天对话框
4）页面使用简约风格，颜色不要超过3个，可参照Chatgpt的配色，以黑白为主即可

5.项目要求
1）数据库使用mysql，192.168.2.100:3306,root,zhang，生成一个db.sql数据库脚本放在根目录下，不需要自动初始化数据库，由人工手动执行
2）向量数据库使用milvus，192.168.2.100:19530，数据库使用pdf_ai_doc，集合使用pdf_doc,
3）所有用到的模型或其他不能再requirements.txt中配置的依赖，均需要在model.yaml配置
4）model.yaml这个配置文件主要用来配置模型相关的功能，项目全局用到的模型都需要在这里配置，需要写清楚注释,配置中提供一个“是否使用GPU加速”的全局配置开关，打开则所有模型都使用GPU加速，关闭则都使用CPU，默认是关闭状态
5）prompt.yaml这个配置文件主要用来配置提示词，项目全局用到的提示词均需要在这里配置，需要写清楚注释
6）图数据库使用Neo4j，192.168.2.100:7687，neo4j,zhang123456
7）大语言模型使用deepseek的api，https://api.deepseek.com,sk-27e712e3a6c64533884adc0ad040ff3b，不使用本地模型
8）嵌入模型使用768纬的本地模型
9）ocr也使用本地模型
10）在项目启动时，进行环境检查，检查内容如下：
a.需要的模型是否已经按照配置下载完成，若没有模型需要执行下载，并给出对应的控制台日志
b.向量数据库是否已经初始化完毕，若不存在需要按照配置文件配置初始化向量数据库，若存在则不需要初始化，并给出对应的控制台日志
c.图数据库是否已经初始化完毕，若不存在需要按照配置文件配置初始化图数据库，若存在则不需要初始化，并给出对应的控制台日志
d.嵌入模型是否已经初始化完毕，若不存在需要按照配置文件配置初始化嵌入模型，若存在则不需要初始化，并给出对应的控制台日志
e.ocr模型是否已经初始化完毕，若不存在需要按照配置文件配置初始化ocr模型，若存在则不需要初始化，并给出对应的控制台日志
f.还有其他需要提前准备的内容也需要在这里检查完成，才可以启动项目
g.环境检查这个步骤是项目启动的根本，在启动时严格检查各个基础设施是否已经准备完全，在使用过程中就不需要再检查了，直接使用即可
11）所有功能不需要降级措施，若有错误直接提示，不需要
12）不要扩散需求，按照我上面说的内容实现



重构版
1.重构环境检查器
	1）深度分析这个项目的环境检查器，先排查项目的所有关于模型或组件等不能直接在requirements.txt加载的内容是否都已经在environment_checker.py这个文件中做了预加载，如果有在其他文件中处理这些内容的要都转移到这个文件中来
	2）重构环境检查器，检查的内容和检查处理逻辑如下：
		1.Mysql
			检查项：a.是否可以连接成功、b.数据库是否存在、c.表结构是否完整
			处理方式：a.连接不成功直接在检查报告中说明不成功原因，b.数据库不存在日志给出提示，然后初始化数据库，c.表结构不完整直接日志给出提示，然后调整表结构
		2.Milvus连接
			检查项：a.是否可以连接成功、b.数据库是否存在、c.集合是否存在
			处理方式：a.连接不成功直接在检查报告中说明不成功原因，b.数据库不存在日志给出提示，然后初始化数据库，c.集合不存在日志给出提示，然后初始化集合
		3.Neo4j连接
			检查项：a.是否可以连接成功、b.数据库是否存在
			处理方式：a.连接不成功直接在检查报告中说明不成功原因，b.数据库不存在日志给出提示，然后初始化数据库
		4.DeepSeek连接
			检查项：a.是否可以连接成功、b.秘钥是否正确
			处理方式：a.连接不成功直接在检查报告中说明不成功原因，b.秘钥错误直接在检查报告中说明秘钥错误
		5.模型检查和预下载
			检查项：a.模型是否已经存在
			处理方式：a.若模型不存在需要下载
		6.以上的所有检查项，需要在初始化或下载完成后重新做该项的检查
2.重构GraphRAG
	1）深度分析GraphRAG功能，重构GraphRAG
	2）将FileService.py中的GraphRAG所有功能废弃删除掉
	3）在GraphRAGService.py中重构GraphRAG所有功能，以下是功能描述
		a.必须要支持pdf文件内容的完整识别，文字、表格、图片（必须支持理解图像语义内容）、图表（识别图表类型、数据趋势、视觉元素等）
		b.表格不仅要识别表头和数据，还要支持在做GraphRAG检索时，可召回完整表格或指定行数据
		c.图片必须支持理解图像语义内容，识别图表类型、数据趋势、视觉元素等，图片转换为纯文本描述后不能丢失视觉信息，还要支持在做GraphRAG检索时，可召回图片
		d.图表需要专门的图表识别和数据提取逻辑，也必须做到在做GraphRAG检索时，可召回完整图表
		e.不对pdf的内容做任何限制，例如图片大小，只要是pdf的内容，就需要按照以上逻辑做识别
		f.图片保存的位置可以在config.yaml中配置，指定保存路径，便于检索时返回原图片
	4）这个功能可能需要用到多种模型，检查model.yaml，所有用到的模型都需要支持在model.yaml中配置，适当情况下可重构这个文件
	5）所有模型都需要在
3.优化智能检索
	1）当前的实现已经基本满足需求，但不支持多模态内容展示界面
	2）优化智能检索，需要支持多模态内容展示界面